import{c,B as o,f as d}from"./createLucideIcon-B3Iz-h8N.js";import{r as m,j as e,$ as v,a as f}from"./app-CL8bQxlr.js";import{c as l}from"./index-BaUo0c8x.js";import{X as b}from"./x-UdVWHoq3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],L=c("Heart",w);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M5 12h14",key:"1ays0h"}]],C=c("Minus",k);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],M=c("Plus",_);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$=c("Trash2",q);function P({isOpen:x,onClose:n,items:u,fetchCart:h}){const[t,y]=m.useState([]),[i,r]=m.useState(!1);m.useEffect(()=>{y(u)},[u]);const p=async(s,a)=>{if(!(a<1)){r(!0);try{await f.post(route("cart.update"),{product_id:s,quantity:a}),h(),l.success("Cart updated")}catch(N){console.error("Error updating cart",N),l.error("Failed to update cart")}finally{r(!1)}}},j=async s=>{r(!0);try{await f.post(route("cart.remove"),{product_id:s}),h(),l.success("Item removed from cart")}catch(a){console.error("Error removing from cart",a),l.error("Failed to remove item")}finally{r(!1)}},g=()=>t.reduce((s,a)=>s+a.price*a.quantity,0);return e.jsx("div",{className:`fixed inset-0 z-50 bg-black/50 transition-opacity ${x?"opacity-100":"pointer-events-none opacity-0"}`,children:e.jsx("div",{className:`bg-background fixed top-0 right-0 h-full w-full max-w-md shadow-lg transition-transform duration-300 ${x?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Keranjang"}),e.jsx("button",{onClick:n,className:"rounded-full p-1.5 hover:bg-gray-100",children:e.jsx(b,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4",children:t.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx("p",{className:"text-gray-500",children:"Your cart is empty"}),e.jsx(o,{className:"mt-4",onClick:n,children:"Continue Shopping"})]}):e.jsx("ul",{className:"space-y-3",children:t.map(s=>e.jsxs("li",{className:"flex flex-col gap-2 rounded-lg border p-2 sm:flex-row sm:gap-4 sm:p-3",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 rounded-md bg-gray-100 sm:h-20 sm:w-20",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"h-full w-full rounded-md object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400 sm:text-sm",children:"No image"})})}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"line-clamp-2 text-sm font-medium sm:text-base",children:s.name}),e.jsx("button",{onClick:()=>j(s.id),className:"ml-2 text-gray-400 hover:text-red-500",disabled:i,children:e.jsx($,{className:"h-4 w-4"})})]}),e.jsx("span",{className:"text-xs text-gray-500 sm:text-sm",children:d(s.price)}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 sm:mt-auto",children:[e.jsx("button",{className:"rounded-full border p-1 text-gray-500 hover:bg-gray-100 disabled:opacity-50",onClick:()=>p(s.id,s.quantity-1),disabled:s.quantity<=1||i,children:e.jsx(C,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"})}),e.jsx("span",{className:"min-w-[1.5rem] text-center text-sm sm:min-w-[2rem]",children:s.quantity}),e.jsx("button",{className:"rounded-full border p-1 text-gray-500 hover:bg-gray-100 disabled:opacity-50",onClick:()=>p(s.id,s.quantity+1),disabled:i,children:e.jsx(M,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"})}),e.jsx("div",{className:"ml-auto text-right",children:e.jsx("span",{className:"text-sm font-medium sm:text-base",children:d(s.price*s.quantity)})})]})]})]},s.id))})}),t.length>0&&e.jsxs("div",{className:"space-y-3 border-t p-4",children:[e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:d(g())})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{asChild:!0,className:"w-full",children:e.jsx(v,{href:route("checkout.index"),children:"Checkout"})}),e.jsx(o,{variant:"outline",onClick:n,children:"Continue Shopping"})]})]})]})})})}export{P as C,L as H,C as M,M as P};
